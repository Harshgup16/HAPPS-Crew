<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KidSafe Search - Safe & Fun Learning</title>
    <style>
        :root {
            --primary: #4A90E2;
            --secondary: #F7B731;
            --success: #2ECC71;
            --background: #F8FAFC;
            --text: #2D3748;
            --radius: 12px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: system-ui, -apple-system, sans-serif;
        }

        body {
            background: var(--background);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 1rem 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
        }

        .nav-buttons {
            display: flex;
            gap: 1rem;
        }

        .nav-button {
            background: none;
            border: none;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-size: 1rem;
            color: var(--text);
            border-radius: var(--radius);
            transition: all 0.2s;
        }

        .nav-button:hover {
            background: rgba(74, 144, 226, 0.1);
            color: var(--primary);
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 4rem 1.5rem;
            gap: 2rem;
        }

        .hero {
            text-align: center;
            margin-bottom: 2rem;
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary);
        }

        .hero p {
            font-size: 1.2rem;
            color: #64748B;
        }

        .search-container {
            width: 100%;
            max-width: 800px;
        }

        .search-modes {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .mode-button {
            background: white;
            border: 2px solid transparent;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .mode-button.active {
            border-color: var(--primary);
            color: var(--primary);
        }

        .search-box {
            position: relative;
            width: 100%;
        }

        .search-input {
            width: 100%;
            padding: 1.25rem 1.5rem;
            padding-right: 4rem;
            border: 2px solid transparent;
            border-radius: var(--radius);
            font-size: 1.1rem;
            background: white;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            transition: all 0.2s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 4px 20px rgba(74, 144, 226, 0.15);
        }

        .search-button {
            position: absolute;
            right: 0.5rem;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.75rem;
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.2s;
        }

        .search-button:hover {
            background: #357ABD;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 4rem;
            width: 100%;
            max-width: 1200px;
        }

        .feature-card {
            background: white;
            padding: 2rem;
            border-radius: var(--radius);
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .feature-title {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: var(--text);
        }

        .feature-description {
            color: #64748B;
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .nav-buttons {
                display: none;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .search-modes {
                flex-wrap: wrap;
            }

            .mode-button {
                flex: 1;
                min-width: 140px;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container header-content">
            <div class="logo">
                üõ°Ô∏è KidSafe Search
            </div>
            <div class="nav-buttons">
                <button class="nav-button">üìö Learn</button>
                <!-- <button class="nav-button">‚≠ê Rewards</button> -->
                <button class="nav-button" onclick="window.location.href='login.html'">üë§ Parent Dashboard</button>
            </div>
        </div>
    </header>





    <main class="main-content">
        <div class="hero">
            <h1>Explore Safely, Learn Freely! üöÄ</h1>
            <p>Your friendly guide to discovering amazing things on the internet</p>
        </div>

        <div class="search-container">
            <div class="search-modes">
                <button class="mode-button active">üîç Everything</button>
                <button class="mode-button">üìö Homework Help</button>
                <button class="mode-button">üéÆ Fun & Games</button>
                <button class="mode-button">üé® Arts & Crafts</button>
            </div>

            <div class="search-box">
                <input type="text" class="search-input" placeholder="What would you like to learn about?" aria-label="Search">
                <button class="search-button">üîç</button>
            </div>
        </div>

        <div class="features">
            <div class="feature-card">
                <div class="feature-icon">üõ°Ô∏è</div>
                <h3 class="feature-title">Safe Browsing</h3>
                <p class="feature-description">Every search is checked to keep you safe while exploring</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üéØ</div>
                <h3 class="feature-title">Kid-Friendly Results</h3>
                <p class="feature-description">Find exactly what you need with age-appropriate content</p>
            </div>
            <!-- <div class="feature-card">
                <div class="feature-icon">üèÜ</div>
                <h3 class="feature-title">Learn & Earn</h3>
                <p class="feature-description">Earn points and badges while you learn new things</p>
            </div> -->
            <div class="feature-card">
                <div class="feature-icon">üé®</div>
                <h3 class="feature-title">Creative Mode</h3>
                <p class="feature-description">Discover fun activities and creative projects</p>
            </div>
        </div>
    </main>

    <script>
        // Mode selection functionality
        const modeButtons = document.querySelectorAll('.mode-button');
        const searchInput = document.querySelector('.search-input');
        const searchButton = document.querySelector('.search-button');
        
        const BLOCK_DURATION = 10 * 60 * 1000; // 10 minutes in milliseconds
        let strikes = parseInt(localStorage.getItem('strikes') || '0');
        const MAX_STRIKES = 3;
        let blockEndTime = parseInt(localStorage.getItem('blockEndTime') || '0');
        
        const PARENT_EMAIL = sessionStorage.getItem('parentEmail') || 'parent@example.com';
        const CHILD_NAME = sessionStorage.getItem('childName') || 'User';








        <!-- TODO: "SAARE restrictedWords WORDS AND blockedWebsites KI LIST NIKAL KE BHAR DENSA BYEEEEEEEEE ULLLLLLUU" -->

        const restrictedWords = [
            // Explicit terms
            'explicit', 'nude', 'naked', 'sex', 'porn', 'xxx', 'adult', 'mature',
            'erotic', 'erotica', 'intimate', 'private', 'sensual', 'seductive',
            'provocative', 'lewd', 'lascivious', 'indecent', 'obscene', 'filthy',
            'dirty', 'raunchy', 'racy', 'risque', 'bawdy', 'coarse', 'crude',
            'vulgar', 'profane', 'off-color', 'offensive', 'indecency', 'smut',
            'smutty', 'blue', 'ribald', 'salacious', 'prurient', 'lurid', 'lecherous',
            // Violent terms
            'violent', 'violence', 'aggressive', 'aggression', 'hostile', 'hostility',
            'abuse', 'abusive', 'assault', 'attack', 'brawl', 'fight', 'beat',
            'punch', 'kick', 'stab', 'shoot', 'kill', 'murder', 'homicide', 'manslaughter',
            'mayhem', 'chaos', 'anarchy', 'terrorism', 'terrorist', 'terrorize',
            'intimidate', 'threaten', 'menace', 'bully', 'harass', 'torment', 'torture',
            // Inappropriate terms
            'inappropriate', 'offensive', 'insult', 'insulting', 'derogatory',
            'disrespect', 'disrespectful', 'disparaging', 'belittling', 'mocking',
            'teasing', 'taunting', 'ridicule', 'scoff', 'sneer', 'jeer', 'gibe',
            'jibe', 'taunt', 'snub', 'slur', 'slight', 'affront', 'aspersion',
            'calumny', 'defamation', 'libel', 'slander', 'vilify', 'villify',
            'denigrate', 'degrade', 'demeaning', 'humiliate', 'humiliating',
        ];

        const blockedWebsites = [
            'https://www.exampleadultsite.com',
            'https://www.examplegamblingsite.com',
            'https://www.exampleillegalsite.com',
        ];

        function containsRestrictedWords(query) {
            const words = query.toLowerCase().split(/\s+/);
            return words.some(word => restrictedWords.includes(word));
        }

        function isBlocked() {
            return Date.now() < blockEndTime;
        }

        function getRemainingBlockTime() {
            const remaining = Math.ceil((blockEndTime - Date.now()) / 1000);
            const minutes = Math.floor(remaining / 60);
            const seconds = remaining % 60;
            return `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        function setBlock() {
            blockEndTime = Date.now() + BLOCK_DURATION;
            localStorage.setItem('blockEndTime', blockEndTime);
            disableSearch();
            startBlockTimer();
        }

        function startBlockTimer() {
            const timer = setInterval(() => {
                if (!isBlocked()) {
                    enableSearch();
                    clearInterval(timer);
                } else {
                    updateBlockMessage();
                }
            }, 1000);
        }

        function disableSearch() {
            searchInput.disabled = true;
            searchButton.disabled = true;
            searchInput.placeholder = `Search blocked for ${getRemainingBlockTime()}`;
        }

        function enableSearch() {
            searchInput.disabled = false;
            searchButton.disabled = false;
            searchInput.placeholder = "Enter your search";
        }

        function updateBlockMessage() {
            searchInput.placeholder = `Search blocked for ${getRemainingBlockTime()}`;
        }

        function incrementStrikes(searchQuery) {
            strikes++;
            localStorage.setItem('strikes', strikes);
            
            if (strikes >= MAX_STRIKES) {
                notifyParent(searchQuery);
                setBlock();
                strikes = 0;
                localStorage.setItem('strikes', strikes);
            }
        }

        async function notifyParent(searchQuery) {
            try {
                const response = await fetch('/api/notify-parent', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        parentEmail: PARENT_EMAIL,
                        childName: CHILD_NAME,
                        searchQuery: searchQuery,
                        timestamp: new Date().toISOString(),
                        strikeCount: MAX_STRIKES,
                        blockDuration: BLOCK_DURATION / 60000
                    })
                });

                if (!response.ok) {
                    console.error('Failed to send parent notification');
                }
            } catch (error) {
                console.error('Error sending notification:', error);
            }
        }

        function performSearch() {
            if (isBlocked()) {
                alert(`Search is blocked for ${getRemainingBlockTime()}`);
                return;
            }

            const query = searchInput.value.trim();
            
            if (!query) {
                alert('Please enter a search term');
                return;
            }

            if (containsRestrictedWords(query)) {
                incrementStrikes(query);
                const remainingStrikes = MAX_STRIKES - strikes;
                alert(`Warning: Inappropriate search detected. ${remainingStrikes} warnings remaining before block.`);
                searchInput.value = '';
                return;
            }

            const searchUrl = `https://duckduckgo.com/?${new URLSearchParams({
                q: query,
                kp: '-1',
                kl: 'us-en',
                kd: '-1'
            })}`;
            
            window.open(searchUrl, '_blank');
            searchInput.value = '';
        }

        // Initialize everything when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            // Check block status
            if (isBlocked()) {
                disableSearch();
                startBlockTimer();
            }

            // Hero animation
            const hero = document.querySelector('.hero');
            hero.style.opacity = '0';
            hero.style.transform = 'translateY(20px)';
            hero.style.transition = 'all 0.5s ease-out';
            
            setTimeout(() => {
                hero.style.opacity = '1';
                hero.style.transform = 'translateY(0)';
            }, 100);

            // Add event listeners (only once)
            modeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    modeButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                });
            });

            searchButton.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') performSearch();
            });
        });
    </script>
</body>
</html>